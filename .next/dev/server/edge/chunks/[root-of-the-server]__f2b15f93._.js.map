{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { NextResponse, type NextRequest } from \"next/server\"\n\n// 使用简单的 cookie 检查实现路由保护（避免缺少 createMiddlewareClient 导致的错误）\nexport function middleware(req: NextRequest) {\n  const res = NextResponse.next()\n\n  // 允许的公共路径\n  const publicPaths = [\"/login\", \"/import-test.html\", \"/import-course.json\"]\n  const { pathname } = req.nextUrl\n\n  if (\n    publicPaths.some((path) => pathname.startsWith(path)) ||\n    pathname.startsWith(\"/_next\") ||\n    pathname.startsWith(\"/api/auth\") ||\n    pathname.startsWith(\"/favicon\")\n  ) {\n    return res\n  }\n\n  // 检查 Supabase Auth cookies\n  const accessToken = req.cookies.get(\"sb-access-token\")?.value\n\n  if (!accessToken && pathname === \"/\") {\n    const loginUrl = req.nextUrl.clone()\n    loginUrl.pathname = \"/login\"\n    loginUrl.search = \"\"\n    return NextResponse.redirect(loginUrl)\n  }\n\n  return res\n}\n\nexport const config = {\n  matcher: [\"/((?!_next/static|_next/image|favicon.ico).*)\"],\n}\n\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAGO,SAAS,WAAW,GAAgB;IACzC,MAAM,MAAM,gMAAY,CAAC,IAAI;IAE7B,UAAU;IACV,MAAM,cAAc;QAAC;QAAU;QAAqB;KAAsB;IAC1E,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,OAAO;IAEhC,IACE,YAAY,IAAI,CAAC,CAAC,OAAS,SAAS,UAAU,CAAC,UAC/C,SAAS,UAAU,CAAC,aACpB,SAAS,UAAU,CAAC,gBACpB,SAAS,UAAU,CAAC,aACpB;QACA,OAAO;IACT;IAEA,2BAA2B;IAC3B,MAAM,cAAc,IAAI,OAAO,CAAC,GAAG,CAAC,oBAAoB;IAExD,IAAI,CAAC,eAAe,aAAa,KAAK;QACpC,MAAM,WAAW,IAAI,OAAO,CAAC,KAAK;QAClC,SAAS,QAAQ,GAAG;QACpB,SAAS,MAAM,GAAG;QAClB,OAAO,gMAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,OAAO;AACT;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAgD;AAC5D"}}]
}